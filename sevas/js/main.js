"use strict";document.addEventListener("DOMContentLoaded",function(){function e(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}var t;if("IntersectionObserver"in window){t=document.querySelectorAll(".lazy");var n=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting){var t=e.target;t.src=t.dataset.src,t.classList.remove("lazy"),n.unobserve(t)}})});t.forEach(function(e){n.observe(e)})}else{var i,s=function m(){i&&clearTimeout(i),i=setTimeout(function(){var e=window.pageYOffset;t.forEach(function(t){t.offsetTop<window.innerHeight+e&&(t.src=t.dataset.src,t.classList.remove("lazy"))}),0==t.length&&(document.removeEventListener("scroll",m),window.removeEventListener("resize",m),window.removeEventListener("orientationChange",m))},20)};t=document.querySelectorAll(".lazy"),document.addEventListener("scroll",s),window.addEventListener("resize",s),window.addEventListener("orientationChange",s)}e(function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")});for(var o=document.querySelectorAll(".nav__item > a"),r=0;r<o.length;r++)o[r].setAttribute("data-title",o[r].textContent);for(var o=document.querySelectorAll(".categories-item__link > span"),r=0;r<o.length;r++)o[r].setAttribute("data-title",o[r].textContent);window.addEventListener("scroll",function(){var e=document.querySelector("#head");null!=e&&(this.pageYOffset>1?e.classList.add("js-sticky"):e.classList.remove("js-sticky"))});var a=document.querySelector("#js-showHideFilter"),c=document.querySelector("#filter"),l=document.querySelector("#js-hideFilter");null!=a&&a.addEventListener("click",function(){c.classList.toggle("js-filterShow")}),null!=l&&l.addEventListener("click",function(){c.classList.remove("js-filterShow")});var u=document.querySelector("#js-showTooltip"),d=document.querySelector("#js-tooltip"),v=document.querySelector("#js-hideTooltip");null!=u&&u.addEventListener("click",function(){d.style.display="block"}),null!=v&&v.addEventListener("click",function(){d.style.display="none"});var f=document.querySelectorAll(".delivery-form__wrap > input");if(null!=f)for(var r=0;r<f.length;r++)f[r].addEventListener("keyup",function(e){e.preventDefault(),console.log(e,this),""!=this.value?this.classList.add("notEmptyInput"):this.classList.remove("notEmptyInput")})}),$(document).ready(function(){if($(window).width()<992){var e=function(e){function t(){n.toggleClass("burger-menu_active"),i.toggleClass("burger-menu__button_active"),n.hasClass("burger-menu_active")?$("body").css({overflow:"hidden",position:"fixed",width:"100%"}):$("body").css({overflow:"visible",position:"static",width:"unset"})}var n=$(e),i=n.find(".burger-menu__button"),s=n.find(".nav__link"),o=n.find(".burger-menu__overlay");i.click(function(e){e.preventDefault(),t()}),s.click(function(){t()}),o.click(function(){t()})};e(".burger-menu")}$(".js-offerSlider").slick({infinite:!0,dots:!0,arrows:!1,lazyLoad:"ondemand",speed:400,responsive:[{breakpoint:576,settings:{dots:!1}}]}),$(function(){var e=document.location.href;$.each($(".nav__list > li > a"),function(){this.href==e&&($(this).toggleClass("js-NavLink_active"),$(this).closest(".nav__list > li").find(".sub-menu").toggleClass("js-SubMenu_active"))}),$.each($(".sub-menu a"),function(){this.href==e&&($(this).toggleClass("js-SubMenuLink_active"),$(this).hasClass("js-SubMenuLink_active")&&($(this).closest(".nav__list > li").find(">a").toggleClass("js-NavLink_active"),$(".sub-menu").toggleClass("js-SubMenu_active")))}),$(".js-NavLink_active, .js-SubMenuLink_active").closest(".nav__item").css("height","unset")}),$(".js-minus").click(function(){var e=$(this).parent().find("input"),t=parseInt(e.val())-1;return t=t<1?1:t,e.val(t),e.change(),!1}),$(".js-plus").click(function(){var e=$(this).parent().find("input");return e.val(parseInt(e.val())+1),e.change(),!1}),$(".js-imgChange").on("click",function(e){$("#js-imgProduct").attr("src",$(this).attr("src"))}),$("#tel").mask("+7(999) 999 99 99")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwidGVzdFdlYlAiLCJjYWxsYmFjayIsIndlYlAiLCJJbWFnZSIsIm9ubG9hZCIsIm9uZXJyb3IiLCJoZWlnaHQiLCJzcmMiLCJsYXp5bG9hZEltYWdlcyIsIndpbmRvdyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbWFnZU9ic2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJlbnRyaWVzIiwib2JzZXJ2ZXIiLCJmb3JFYWNoIiwiZW50cnkiLCJpc0ludGVyc2VjdGluZyIsImltYWdlIiwidGFyZ2V0IiwiZGF0YXNldCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInVub2JzZXJ2ZSIsIm9ic2VydmUiLCJsYXp5bG9hZFRocm90dGxlVGltZW91dCIsImxhenlsb2FkIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInNjcm9sbFRvcCIsInBhZ2VZT2Zmc2V0IiwiaW1nIiwib2Zmc2V0VG9wIiwiaW5uZXJIZWlnaHQiLCJsZW5ndGgiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic3VwcG9ydCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGQiLCJ0ZXh0TGluayIsImkiLCJzZXRBdHRyaWJ1dGUiLCJ0ZXh0Q29udGVudCIsImhlYWQiLCJ0aGlzIiwic2hvd0hpZGVGaWx0ZXIiLCJmaWx0ZXIiLCJoaWRlRmlsdGVyIiwidG9nZ2xlIiwic2hvd1Rvb2x0aXAiLCJ0b29sdGlwIiwiaGlkZVRvb2x0aXAiLCJzdHlsZSIsImRpc3BsYXkiLCJpbnB1dHMiLCJlIiwicHJldmVudERlZmF1bHQiLCJjb25zb2xlIiwibG9nIiwidmFsdWUiLCIkIiwicmVhZHkiLCJ3aWR0aCIsImJ1cmdlck1lbnUiLCJzZWxlY3RvciIsInRvZ2dsZU1lbnUiLCJtZW51IiwidG9nZ2xlQ2xhc3MiLCJidXR0b24iLCJoYXNDbGFzcyIsImNzcyIsIm92ZXJmbG93IiwicG9zaXRpb24iLCJmaW5kIiwibGlua3MiLCJvdmVybGF5IiwiY2xpY2siLCJzbGljayIsImluZmluaXRlIiwiZG90cyIsImFycm93cyIsImxhenlMb2FkIiwic3BlZWQiLCJyZXNwb25zaXZlIiwiYnJlYWtwb2ludCIsInNldHRpbmdzIiwidXJsIiwibG9jYXRpb24iLCJocmVmIiwiZWFjaCIsImNsb3Nlc3QiLCIkaW5wdXQiLCJwYXJlbnQiLCJjb3VudCIsInBhcnNlSW50IiwidmFsIiwiY2hhbmdlIiwib24iLCJhdHRyIiwibWFzayJdLCJtYXBwaW5ncyI6IkFBQUEsWUFFQUEsVUFBU0MsaUJBQWlCLG1CQUFvQixXQWlENUMsUUFBU0MsR0FBU0MsR0FDaEIsR0FBSUMsR0FBTyxHQUFJQyxNQUVmRCxHQUFLRSxPQUFTRixFQUFLRyxRQUFVLFdBQzNCSixFQUF3QixHQUFmQyxFQUFLSSxTQUdoQkosRUFBS0ssSUFBTSxrSEF2RGIsR0FBSUMsRUFFSixJQUFJLHdCQUEwQkMsUUFBUSxDQUNwQ0QsRUFBaUJWLFNBQVNZLGlCQUFpQixRQUMzQyxJQUFJQyxHQUFnQixHQUFJQyxzQkFBcUIsU0FBVUMsRUFBU0MsR0FDOURELEVBQVFFLFFBQVEsU0FBVUMsR0FDeEIsR0FBSUEsRUFBTUMsZUFBZ0IsQ0FDeEIsR0FBSUMsR0FBUUYsRUFBTUcsTUFDbEJELEdBQU1YLElBQU1XLEVBQU1FLFFBQVFiLElBQzFCVyxFQUFNRyxVQUFVQyxPQUFPLFFBQ3ZCWCxFQUFjWSxVQUFVTCxPQUk5QlYsR0FBZU8sUUFBUSxTQUFVRyxHQUMvQlAsRUFBY2EsUUFBUU4sU0FFbkIsQ0FDTCxHQXNCSU8sR0F0QkFDLEVBQVcsUUFBU0EsS0FDbEJELEdBQ0ZFLGFBQWFGLEdBR2ZBLEVBQTBCRyxXQUFXLFdBQ25DLEdBQUlDLEdBQVlwQixPQUFPcUIsV0FDdkJ0QixHQUFlTyxRQUFRLFNBQVVnQixHQUMzQkEsRUFBSUMsVUFBWXZCLE9BQU93QixZQUFjSixJQUN2Q0UsRUFBSXhCLElBQU13QixFQUFJWCxRQUFRYixJQUN0QndCLEVBQUlWLFVBQVVDLE9BQU8sV0FJSSxHQUF6QmQs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QyxFQUFFaEIsTUFBTXNELEtBQUssVUFHL0N0QyxFQUFFLFFBQVF1QyxLQUFLIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjsgLy9sYXp5IGxvYWRcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xuICB2YXIgbGF6eWxvYWRJbWFnZXM7XG5cbiAgaWYgKFwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcIiBpbiB3aW5kb3cpIHtcbiAgICBsYXp5bG9hZEltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubGF6eVwiKTtcbiAgICB2YXIgaW1hZ2VPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihmdW5jdGlvbiAoZW50cmllcywgb2JzZXJ2ZXIpIHtcbiAgICAgIGVudHJpZXMuZm9yRWFjaChmdW5jdGlvbiAoZW50cnkpIHtcbiAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgdmFyIGltYWdlID0gZW50cnkudGFyZ2V0O1xuICAgICAgICAgIGltYWdlLnNyYyA9IGltYWdlLmRhdGFzZXQuc3JjO1xuICAgICAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJsYXp5XCIpO1xuICAgICAgICAgIGltYWdlT2JzZXJ2ZXIudW5vYnNlcnZlKGltYWdlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgbGF6eWxvYWRJbWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgIGltYWdlT2JzZXJ2ZXIub2JzZXJ2ZShpbWFnZSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxhenlsb2FkID0gZnVuY3Rpb24gbGF6eWxvYWQoKSB7XG4gICAgICBpZiAobGF6eWxvYWRUaHJvdHRsZVRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGxhenlsb2FkVGhyb3R0bGVUaW1lb3V0KTtcbiAgICAgIH1cblxuICAgICAgbGF6eWxvYWRUaHJvdHRsZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICAgICAgbGF6eWxvYWRJbWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoaW1nKSB7XG4gICAgICAgICAgaWYgKGltZy5vZmZzZXRUb3AgPCB3aW5kb3cuaW5uZXJIZWlnaHQgKyBzY3JvbGxUb3ApIHtcbiAgICAgICAgICAgIGltZy5zcmMgPSBpbWcuZGF0YXNldC5zcmM7XG4gICAgICAgICAgICBpbWcuY2xhc3NMaXN0LnJlbW92ZSgnbGF6eScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGxhenlsb2FkSW1hZ2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBsYXp5bG9hZCk7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgbGF6eWxvYWQpO1xuICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25DaGFuZ2VcIiwgbGF6eWxvYWQpO1xuICAgICAgICB9XG4gICAgICB9LCAyMCk7XG4gICAgfTtcblxuICAgIHZhciBsYXp5bG9hZFRocm90dGxlVGltZW91dDtcbiAgICBsYXp5bG9hZEltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubGF6eVwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGxhenlsb2FkKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBsYXp5bG9hZCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbkNoYW5nZVwiLCBsYXp5bG9hZCk7XG4gIH0gLy/QtNC+0LHQsNCy0LvRj9C10YIgd2VicCDQuNC30L7QsdGA0LDQttC10L3QuNGPINC90LAg0YTQvtC9INCyINC60L7QvNC/0LjQu9C40YDRg9C10LzQvtC8IGNzc1xuXG5cbiAgZnVuY3Rpb24gdGVzdFdlYlAoY2FsbGJhY2spIHtcbiAgICB2YXIgd2ViUCA9IG5ldyBJbWFnZSgpO1xuXG4gICAgd2ViUC5vbmxvYWQgPSB3ZWJQLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjYWxsYmFjayh3ZWJQLmhlaWdodCA9PSAyKTtcbiAgICB9O1xuXG4gICAgd2ViUC5zcmMgPSBcImRhdGE6aW1hZ2Uvd2VicDtiYXNlNjQsVWtsR1Jqb0FBQUJYUlVKUVZsQTRJQzRBQUFDeUFnQ2RBU29DQUFJQUxtazBtazBpSWlJaUlnQm9TeWdBQmM2V1dnQUEvdmVmZi8wUFA4YkEvL0x3WUFBQVwiO1xuICB9XG5cbiAgdGVzdFdlYlAoZnVuY3Rpb24gKHN1cHBvcnQpIHtcbiAgICBpZiAoc3VwcG9ydCA9PSB0cnVlKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2xhc3NMaXN0LmFkZCgnd2VicCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2xhc3NMaXN0LmFkZCgnbm8td2VicCcpO1xuICAgIH1cbiAgfSk7IC8v0LLRi9Cy0L7QtCDQsiBiZWZvcmUg0YHRgdC70YvQu9C60Lgg0LzQtdC90Y4g0LfQvdCw0YfQtdC90LjQtSDRgdCw0LzQvtC5INGB0YHRi9C70LrQuFxuXG4gIHZhciB0ZXh0TGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZfX2l0ZW0gPiBhJyk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXh0TGluay5sZW5ndGg7IGkrKykge1xuICAgIHRleHRMaW5rW2ldLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsIHRleHRMaW5rW2ldLnRleHRDb250ZW50KTtcbiAgfSAvL9Cy0YvQstC+0LQg0LIgYWZ0ZXIg0L3QsNC30LLQsNC90LjQtSDQutCw0YLQtdCz0L7RgNC40LkgLSDQtNC70Y8g0LDQvdC40LzQsNGG0LjQuFxuXG5cbiAgdmFyIHRleHRMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGVnb3JpZXMtaXRlbV9fbGluayA+IHNwYW4nKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHRMaW5rLmxlbmd0aDsgaSsrKSB7XG4gICAgdGV4dExpbmtbaV0uc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgdGV4dExpbmtbaV0udGV4dENvbnRlbnQpO1xuICB9IC8v0LvQuNC/0LrQsNGPINC90LDQstC40LPQsNGG0LjRjyDQv9GA0Lgg0L/RgNC+0LrRgNGD0YLQutC1XG5cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciBoZWFkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hlYWQnKTtcblxuICAgIGlmIChoZWFkICE9IG51bGwpIHtcbiAgICAgIGlmICh0aGlzLnBhZ2VZT2Zmc2V0ID4gMSkge1xuICAgICAgICBoZWFkLmNsYXNzTGlzdC5hZGQoJ2pzLXN0aWNreScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaGVhZC5jbGFzc0xpc3QucmVtb3ZlKCdqcy1zdGlja3knKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pOyAvL9GB0LLQvtGA0LDRh9C40LLQsNC90LjQtS/RgNCw0LfQstC+0YDQsNGH0LjQstCw0L3QuNC1INGE0LjQu9GM0YLRgNCwXG5cbiAgdmFyIHNob3dIaWRlRmlsdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2pzLXNob3dIaWRlRmlsdGVyJyk7XG4gIHZhciBmaWx0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmlsdGVyJyk7XG4gIHZhciBoaWRlRmlsdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2pzLWhpZGVGaWx0ZXInKTtcblxuICBpZiAoc2hvd0hpZGVGaWx0ZXIgIT0gbnVsbCkge1xuICAgIHNob3dIaWRlRmlsdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgZmlsdGVyLmNsYXNzTGlzdC50b2dnbGUoJ2pzLWZpbHRlclNob3cnKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChoaWRlRmlsdGVyICE9IG51bGwpIHtcbiAgICBoaWRlRmlsdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgZmlsdGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLWZpbHRlclNob3cnKTtcbiAgICB9KTtcbiAgfSAvLyAvL9C+0YLQvtCx0YDQsNC20LXQvdC40LUg0L/QvtC00LzQtdC90Y4g0YTQuNC70YzRgtGA0LAg0L/RgNC4INC90LDQstC10LTQtdC90LjQuCDQvdCwINC/0YPQvdC60YIg0YTQuNGM0YLRgNCwXG4gIC8vIGxldCBmaWx0ZUNoZWNrMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaWx0ZXItY2hlY2sxJylcbiAgLy8gbGV0IGZpbHRlQ2hlY2syID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpbHRlci1jaGVjazInKVxuICAvLyBsZXQgZmlsdGVDaGVjazMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmlsdGVyLWNoZWNrMycpXG4gIC8vIGxldCBmaWx0ZUNoZWNrNCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaWx0ZXItY2hlY2s0JylcbiAgLy8gbGV0IGZpbHRlQ2hlY2s1ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpbHRlci1jaGVjazUnKVxuICAvLyBsZXQgZmlsdGVDaGVjazYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmlsdGVyLWNoZWNrNicpXG4gIC8vIGxldCBmaWx0ZUNoZWNrNyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaWx0ZXItY2hlY2s3JylcbiAgLy8gbGV0IGZpbHRlQ2hlY2s4ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpbHRlci1jaGVjazgnKVxuICAvLyBmdW5jdGlvbiBzaG93U3ViRmlsdGVyKFN1YkZpbHRlcikge1xuICAvLyBcdFN1YkZpbHRlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBmdW5jdGlvbihldmVudCkge1xuICAvLyBcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgLy8gXHRcdHRoaXMuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgLy8gXHR9KVxuICAvLyB9XG4gIC8vIGZ1bmN0aW9uIGhpZGVTdWJGaWx0ZXIoU3ViRmlsdGVyKSB7XG4gIC8vIFx0U3ViRmlsdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgLy8gXHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gIC8vIFx0XHR0aGlzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgLy8gXHR9KVxuICAvLyB9XG4gIC8vIGxldCBsYWJlbEFsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXItbWVudV9fbGFiZWwnKVxuICAvLyBcdC8v0L/RgNC4INC90LDQstC10LTQtdC90LjQuCDQvdCwINC/0L7QtNC80LXQvdGOINGE0LjQu9GM0YLRgNCwXG4gIC8vIGlmIChmaWx0ZUNoZWNrMSB8fCBmaWx0ZUNoZWNrMiB8fCBmaWx0ZUNoZWNrMyB8fCBmaWx0ZUNoZWNrNCB8fCBmaWx0ZUNoZWNrNSB8fCBmaWx0ZUNoZWNrNiB8fCBmaWx0ZUNoZWNrNyB8fCBmaWx0ZUNoZWNrOCAhPSBudWxsKSB7XG4gIC8vIFx0c2hvd1N1YkZpbHRlcihmaWx0ZUNoZWNrMSlcbiAgLy8gXHRoaWRlU3ViRmlsdGVyKGZpbHRlQ2hlY2sxKVxuICAvLyBcdHNob3dTdWJGaWx0ZXIoZmlsdGVDaGVjazIpXG4gIC8vIFx0aGlkZVN1YkZpbHRlcihmaWx0ZUNoZWNrMilcbiAgLy8gXHRzaG93U3ViRmlsdGVyKGZpbHRlQ2hlY2szKVxuICAvLyBcdGhpZGVTdWJGaWx0ZXIoZmlsdGVDaGVjazMpXG4gIC8vIFx0c2hvd1N1YkZpbHRlcihmaWx0ZUNoZWNrNClcbiAgLy8gXHRoaWRlU3ViRmlsdGVyKGZpbHRlQ2hlY2s0KVxuICAvLyBcdHNob3dTdWJGaWx0ZXIoZmlsdGVDaGVjazUpXG4gIC8vIFx0aGlkZVN1YkZpbHRlcihmaWx0ZUNoZWNrNSlcbiAgLy8gXHRzaG93U3ViRmlsdGVyKGZpbHRlQ2hlY2s2KVxuICAvLyBcdGhpZGVTdWJGaWx0ZXIoZmlsdGVDaGVjazYpXG4gIC8vIFx0c2hvd1N1YkZpbHRlcihmaWx0ZUNoZWNrNylcbiAgLy8gXHRoaWRlU3ViRmlsdGVyKGZpbHRlQ2hlY2s3KVxuICAvLyBcdHNob3dTdWJGaWx0ZXIoZmlsdGVDaGVjazgpXG4gIC8vIFx0aGlkZVN1YkZpbHRlcihmaWx0ZUNoZWNrOClcbiAgLy8gXHQvL9C/0YDQuCDQvdCw0LLQtdC00LXQvdC40Lgg0L3QsCDRgdCw0Lwg0L/Rg9C90LrRgiDQvNC10L3RjiDQuCBcbiAgLy8gXHRmb3IgKHZhciBpID0gMDsgaSA8IGxhYmVsQWxsLmxlbmd0aDsgaSsrKSB7XG4gIC8vIFx0XHRsYWJlbEFsbFtpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBmdW5jdGlvbihldmVudCkge1xuICAvLyBcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKS8v0L7RgdGC0LDQvdC+0LLQutCwINC40YHQv9C+0LvQvdC10L3QuNGPINGE0YPQvdC60YbQuNC4XG4gIC8vIFx0XHRcdHN3aXRjaCAoIHRoaXMuZ2V0QXR0cmlidXRlKCdmb3InKSApIHtcbiAgLy8gXHRcdFx0XHRjYXNlICdicmFuZCc6XG4gIC8vIFx0XHRcdFx0XHRjb25zb2xlLmxvZygnMScpXG4gIC8vIFx0XHRcdFx0XHRmaWx0ZUNoZWNrMS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAvLyBcdFx0XHRcdFx0YnJlYWs7XG4gIC8vIFx0XHRcdFx0Y2FzZSAndGFzdGUnOlxuICAvLyBcdFx0XHRcdFx0Y29uc29sZS5sb2coJzInKVxuICAvLyBcdFx0XHRcdFx0ZmlsdGVDaGVjazIuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgLy8gXHRcdFx0XHRcdGJyZWFrO1xuICAvLyBcdFx0XHRcdGNhc2UgJ2NvdW50cnknOlxuICAvLyBcdFx0XHRcdFx0Y29uc29sZS5sb2coJzMnKVxuICAvLyBcdFx0XHRcdFx0ZmlsdGVDaGVjazMuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgLy8gXHRcdFx0XHRcdGJyZWFrO1xuICAvLyBcdFx0XHRcdGNhc2UgJ3N0cmVuZ3RoJzpcbiAgLy8gXHRcdFx0XHRcdGNvbnNvbGUubG9nKCc0JylcbiAgLy8gXHRcdFx0XHRcdGZpbHRlQ2hlY2s0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gIC8vIFx0XHRcdFx0XHRicmVhaztcbiAgLy8gXHRcdFx0XHRjYXNlICdzbW9raW5lc3MnOlxuICAvLyBcdFx0XHRcdFx0Y29uc29sZS5sb2coJzUnKVxuICAvLyBcdFx0XHRcdFx0ZmlsdGVDaGVjazUuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgLy8gXHRcdFx0XHRcdGJyZWFrO1xuICAvLyBcdFx0XHRcdGNhc2UgJ3dlaWdodCc6XG4gIC8vIFx0XHRcdFx0XHRjb25zb2xlLmxvZygnNicpXG4gIC8vIFx0XHRcdFx0XHRmaWx0ZUNoZWNrNi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAvLyBcdFx0XHRcdFx0YnJlYWs7XG4gIC8vIFx0XHRcdFx0Y2FzZSAncmVzaXN0YW5jZSc6XG4gIC8vIFx0XHRcdFx0XHRjb25zb2xlLmxvZygnNycpXG4gIC8vIFx0XHRcdFx0XHRmaWx0ZUNoZWNrNy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAvLyBcdFx0XHRcdFx0YnJlYWs7XG4gIC8vIFx0XHRcdFx0Y2FzZSAncHJpY2UnOlxuICAvLyBcdFx0XHRcdFx0Y29uc29sZS5sb2coJzgnKVxuICAvLyBcdFx0XHRcdFx0ZmlsdGVDaGVjazguc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgLy8gXHRcdFx0XHRcdGJyZWFrO1xuICAvLyBcdFx0XHRcdGRlZmF1bHQ6XG4gIC8vIFx0XHRcdFx0XHQvLyBzdGF0ZW1lbnRzX2RlZlxuICAvLyBcdFx0XHRcdFx0YnJlYWs7XG4gIC8vIFx0XHRcdFx0fVxuICAvLyBcdFx0fSlcbiAgLy8gXHRcdGxhYmVsQWxsW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgLy8gXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkvL9C+0YHRgtCw0L3QvtCy0LrQsCDQuNGB0L/QvtC70L3QtdC90LjRjyDRhNGD0L3QutGG0LjQuFxuICAvLyBcdFx0XHRzd2l0Y2ggKCB0aGlzLmdldEF0dHJpYnV0ZSgnZm9yJykgKSB7XG4gIC8vIFx0XHRcdFx0Y2FzZSAnYnJhbmQnOlxuICAvLyBcdFx0XHRcdFx0ZmlsdGVDaGVjazEuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAvLyBcdFx0XHRcdFx0YnJlYWs7XG4gIC8vIFx0XHRcdFx0Y2FzZSAndGFzdGUnOlxuICAvLyBcdFx0XHRcdFx0ZmlsdGVDaGVjazIuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAvLyBcdFx0XHRcdFx0YnJlYWs7XG4gIC8vIFx0XHRcdFx0Y2FzZSAnY291bnRyeSc6XG4gIC8vIFx0XHRcdFx0XHRmaWx0ZUNoZWNrMy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gIC8vIFx0XHRcdFx0XHRicmVhaztcbiAgLy8gXHRcdFx0XHRjYXNlICdzdHJlbmd0aCc6XG4gIC8vIFx0XHRcdFx0XHRmaWx0ZUNoZWNrNC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gIC8vIFx0XHRcdFx0XHRicmVhaztcbiAgLy8gXHRcdFx0XHRjYXNlICdzbW9raW5lc3MnOlxuICAvLyBcdFx0XHRcdFx0ZmlsdGVDaGVjazUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAvLyBcdFx0XHRcdFx0YnJlYWs7XG4gIC8vIFx0XHRcdFx0Y2FzZSAnd2VpZ2h0JzpcbiAgLy8gXHRcdFx0XHRcdGZpbHRlQ2hlY2s2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgLy8gXHRcdFx0XHRcdGJyZWFrO1xuICAvLyBcdFx0XHRcdGNhc2UgJ3Jlc2lzdGFuY2UnOlxuICAvLyBcdFx0XHRcdFx0ZmlsdGVDaGVjazcuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAvLyBcdFx0XHRcdFx0YnJlYWs7XG4gIC8vIFx0XHRcdFx0Y2FzZSAncHJpY2UnOlxuICAvLyBcdFx0XHRcdFx0ZmlsdGVDaGVjazguc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAvLyBcdFx0XHRcdFx0YnJlYWs7XG4gIC8vIFx0XHRcdFx0ZGVmYXVsdDpcbiAgLy8gXHRcdFx0XHRcdC8vIHN0YXRlbWVudHNfZGVmXG4gIC8vIFx0XHRcdFx0XHRicmVhaztcbiAgLy8gXHRcdFx0fVxuICAvLyBcdFx0fSlcbiAgLy8gXHR9XG4gIC8vIH1cbiAgLy8gdG9vbHRpcCBpbiBwcm9kdWN0IGNhcmRcblxuXG4gIHZhciBzaG93VG9vbHRpcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNqcy1zaG93VG9vbHRpcCcpO1xuICB2YXIgdG9vbHRpcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNqcy10b29sdGlwJyk7XG4gIHZhciBoaWRlVG9vbHRpcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNqcy1oaWRlVG9vbHRpcCcpO1xuXG4gIGlmIChzaG93VG9vbHRpcCAhPSBudWxsKSB7XG4gICAgc2hvd1Rvb2x0aXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0b29sdGlwLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGhpZGVUb29sdGlwICE9IG51bGwpIHtcbiAgICBoaWRlVG9vbHRpcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRvb2x0aXAuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9KTtcbiAgfSAvLyBjaGVjayBpbnB1dChwYWdlIGRlbGl2ZXJ5KSBhbmQgZWRpdCBib3JkZXIgc3R5bGVcblxuXG4gIHZhciBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGVsaXZlcnktZm9ybV9fd3JhcCA+IGlucHV0Jyk7XG5cbiAgaWYgKGlucHV0cyAhPSBudWxsKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlucHV0c1tpXS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc29sZS5sb2coZSwgdGhpcyk7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlICE9IFwiXCIpIHRoaXMuY2xhc3NMaXN0LmFkZCgnbm90RW1wdHlJbnB1dCcpO2Vsc2UgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdub3RFbXB0eUlucHV0Jyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0gLy8gbGV0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZWxpdmVyeS1mb3JtX193cmFwID4gaW5wdXQnKVxuICAvLyBpbnB1dHMuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLGZ1bmN0aW9uKGUpe1xuICAvLyBcdGUucHJldmVudERlZmF1bHQoKVxuICAvLyBcdGNvbnNvbGUubG9nKGUsdGhpcyk7XG4gIC8vIFx0aWYgKHRoaXMudmFsdWUgIT0gXCJcIilcbiAgLy8gXHRcdHRoaXMuY2xhc3NMaXN0LmFkZCgnZW1wdHknKVxuICAvLyBcdGVsc2UgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdlbXB0eScpXG4gIC8vIH0pXG4gIC8vICQoJy5kZWxpdmVyeS1mb3JtX193cmFwID4gaW5wdXQnKS5rZXl1cCgpXG5cbn0pOyAvLyAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuLy8gXHRpZiAoJCh0aGlzKS5zY3JvbGxUb3AoKSA+IDEpeyAgXG4vLyBcdFx0XHQkKCcubmF2aWdhdGlvbicpLmFkZENsYXNzKFwic3RpY2t5XCIpO1xuLy8gXHR9XG4vLyBcdGVsc2V7XG4vLyBcdFx0XHQkKCcubmF2aWdhdGlvbicpLnJlbW92ZUNsYXNzKFwic3RpY2t5XCIpO1xuLy8gXHR9XG4vLyB9KTtcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAvL2J1cmdlciBtZW51XG4gIGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDk5Mikge1xuICAgIHZhciBidXJnZXJNZW51ID0gZnVuY3Rpb24gYnVyZ2VyTWVudShzZWxlY3Rvcikge1xuICAgICAgdmFyIG1lbnUgPSAkKHNlbGVjdG9yKTtcbiAgICAgIHZhciBidXR0b24gPSBtZW51LmZpbmQoJy5idXJnZXItbWVudV9fYnV0dG9uJyk7XG4gICAgICB2YXIgbGlua3MgPSBtZW51LmZpbmQoJy5uYXZfX2xpbmsnKTtcbiAgICAgIHZhciBvdmVybGF5ID0gbWVudS5maW5kKCcuYnVyZ2VyLW1lbnVfX292ZXJsYXknKTtcbiAgICAgIGJ1dHRvbi5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRvZ2dsZU1lbnUoKTtcbiAgICAgIH0pO1xuICAgICAgbGlua3MuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB0b2dnbGVNZW51KCk7XG4gICAgICB9KTtcbiAgICAgIG92ZXJsYXkuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB0b2dnbGVNZW51KCk7XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gdG9nZ2xlTWVudSgpIHtcbiAgICAgICAgbWVudS50b2dnbGVDbGFzcygnYnVyZ2VyLW1lbnVfYWN0aXZlJyk7XG4gICAgICAgIGJ1dHRvbi50b2dnbGVDbGFzcygnYnVyZ2VyLW1lbnVfX2J1dHRvbl9hY3RpdmUnKTtcblxuICAgICAgICBpZiAobWVudS5oYXNDbGFzcygnYnVyZ2VyLW1lbnVfYWN0aXZlJykpIHtcbiAgICAgICAgICAkKCdib2R5JykuY3NzKHtcbiAgICAgICAgICAgICdvdmVyZmxvdyc6ICdoaWRkZW4nLFxuICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcbiAgICAgICAgICAgICd3aWR0aCc6ICcxMDAlJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoJ2JvZHknKS5jc3Moe1xuICAgICAgICAgICAgJ292ZXJmbG93JzogJ3Zpc2libGUnLFxuICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ3N0YXRpYycsXG4gICAgICAgICAgICAnd2lkdGgnOiAndW5zZXQnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgYnVyZ2VyTWVudSgnLmJ1cmdlci1tZW51Jyk7XG4gIH0gLy8gc2xpZGVyIG9uIHRoZSBpbmRleC5waHBcblxuXG4gICQoJy5qcy1vZmZlclNsaWRlcicpLnNsaWNrKHtcbiAgICAvLyBhdXRvcGxheTogdHJ1ZSxcbiAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICBkb3RzOiB0cnVlLFxuICAgIGFycm93czogZmFsc2UsXG4gICAgbGF6eUxvYWQ6ICdvbmRlbWFuZCcsXG4gICAgc3BlZWQ6IDQwMCxcbiAgICByZXNwb25zaXZlOiBbe1xuICAgICAgYnJlYWtwb2ludDogNTc2LFxuICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgZG90czogZmFsc2VcbiAgICAgIH1cbiAgICB9XVxuICB9KTsgLy8g0YTQvtC60YPRgSDQvNC10L3RjiDQvdCwINCw0LrRgtC40LLQvdC+0Lkg0YHRgdGL0LvQutC1L9GB0YLRgNCw0L3QuNGG0LVcblxuICAkKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdXJsID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZjtcbiAgICAkLmVhY2goJCgnLm5hdl9fbGlzdCA+IGxpID4gYScpLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5ocmVmID09IHVybCkge1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdqcy1OYXZMaW5rX2FjdGl2ZScpOyAvL9Cw0LrRgtC40LLQvdGL0Lkg0LrQu9Cw0YHRgSDQvdCwIHN1Yi1tZW51INC00LvRjyDQv9C70LDQstC90L7Qs9C+INC/0L7Rj9Cy0LvQtdC90LjRj1xuXG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLm5hdl9fbGlzdCA+IGxpJykuZmluZCgnLnN1Yi1tZW51JykudG9nZ2xlQ2xhc3MoJ2pzLVN1Yk1lbnVfYWN0aXZlJyk7XG4gICAgICB9XG5cbiAgICAgIDtcbiAgICB9KTsgLy8g0YTQvtC60YPRgSBzdWItbWVudSDQvdCwINCw0LrRgtC40LLQvdC+0Lkg0YHRgdGL0LvQutC1L9GB0YLRgNCw0L3QuNGG0LVcblxuICAgICQuZWFjaCgkKCcuc3ViLW1lbnUgYScpLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5ocmVmID09IHVybCkge1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdqcy1TdWJNZW51TGlua19hY3RpdmUnKTsgLy/RhNC+0LrRg9GBINC60LDRgtCw0LvQvtCz0LAg0L3QsCDQsNC60YLQuNCy0L3QvtC5INGB0YHRi9C70LrQtS/RgdGC0YDQsNC90LjRhtC1IHN1Yi1tZW51XG4gICAgICAgIC8vICQodGhpcykuY2xvc2VzdCgnLm5hdl9fbGlzdCA+IGxpJykudG9nZ2xlQ2xhc3MoJ25hdl9faXRlbV9hY3RpdmUnKS5maW5kKCc+YScpLnRvZ2dsZUNsYXNzKCduYXZfX2xpbmtfYWN0aXZlJyk7XG4gICAgICAgIC8v0LXRgdC70Lgg0LDQutGC0LjQstC90LAg0YHRgdC70YvQutCwL9GB0YLRgNCw0L3QuNGG0LAgc3ViLW1lbnUg0LTQtdC70LDQtdC8INCw0LrRgtC40LLQvdGL0Lwg0YHRgdGL0LvQutGDINC60LDRgtCw0LvQvtCz0LAg0Lgg0L/QvtC60LDQt9GL0LLQsNC10Lwgc3ViLW1lbnUg0LTQvtCx0LDQstC70Y/RjyDQutC70LDRgdGBINC6IHN1Yi1tZW51XG5cbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2pzLVN1Yk1lbnVMaW5rX2FjdGl2ZScpKSB7XG4gICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcubmF2X19saXN0ID4gbGknKS5maW5kKCc+YScpLnRvZ2dsZUNsYXNzKCdqcy1OYXZMaW5rX2FjdGl2ZScpO1xuICAgICAgICAgICQoJy5zdWItbWVudScpLnRvZ2dsZUNsYXNzKCdqcy1TdWJNZW51X2FjdGl2ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgO1xuICAgICAgfVxuXG4gICAgICA7XG4gICAgfSk7IC8v0LfQsNC00LDQtdGCINCy0YvRgdC+0YLRgyDQsdC70L7QutCwINCyINCz0LvQsNCy0L3QvtC8INC80LXQvdGOINC/0YDQuCDQsNC60YLQuNCy0L3QvtC5INGB0YHRi9C70LrQtSBzdWItbWVudS0g0LTQu9GPINC60L7RgNGA0LXQutGC0L3QvtCz0L4g0L7RgtC+0LHRgNCw0LTQtdC90LjRjyBcblxuICAgICQoJy5qcy1OYXZMaW5rX2FjdGl2ZSwgLmpzLVN1Yk1lbnVMaW5rX2FjdGl2ZScpLmNsb3Nlc3QoJy5uYXZfX2l0ZW0nKS5jc3MoJ2hlaWdodCcsICd1bnNldCcpO1xuICB9KTsgLy8gLy8gY29sbGJhY2sgbW9kYWxcbiAgLy8gXHQkKCcuanMtY29sbGJhY2stbW9kYWwnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgLy8gXHRcdCQoJyNjb2xsYmFjay1tb2RhbCcpLmFyY3RpY21vZGFsKHtcbiAgLy8gXHRcdH0pO1xuICAvLyBcdH0pO1xuICAvLyAkKGZ1bmN0aW9uKCkge1xuICAvLyB9KTtcbiAgLy9taW51cyBhbmQgcGx1cyBwcm9kdXRjIGNhcnRcblxuICAkKCcuanMtbWludXMnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRpbnB1dCA9ICQodGhpcykucGFyZW50KCkuZmluZCgnaW5wdXQnKTtcbiAgICB2YXIgY291bnQgPSBwYXJzZUludCgkaW5wdXQudmFsKCkpIC0gMTtcbiAgICBjb3VudCA9IGNvdW50IDwgMSA/IDEgOiBjb3VudDtcbiAgICAkaW5wdXQudmFsKGNvdW50KTtcbiAgICAkaW5wdXQuY2hhbmdlKCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcbiAgJCgnLmpzLXBsdXMnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRpbnB1dCA9ICQodGhpcykucGFyZW50KCkuZmluZCgnaW5wdXQnKTtcbiAgICAkaW5wdXQudmFsKHBhcnNlSW50KCRpbnB1dC52YWwoKSkgKyAxKTtcbiAgICAkaW5wdXQuY2hhbmdlKCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTsgLy8gY2hhbmdlIGltZyBwcm9kdWN0IGNhcmRcblxuICAkKCcuanMtaW1nQ2hhbmdlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAkKCcjanMtaW1nUHJvZHVjdCcpLmF0dHIoJ3NyYycsICQodGhpcykuYXR0cignc3JjJykpO1xuICB9KTsgLy8gbWFzayBwaG9uZVxuXG4gICQoJyN0ZWwnKS5tYXNrKCcrNyg5OTkpIDk5OSA5OSA5OScpO1xufSk7Il19
